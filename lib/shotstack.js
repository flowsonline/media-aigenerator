export function getBase(){return{host:process.env.SHOTSTACK_HOST||'https://api.shotstack.io',env:process.env.SHOTSTACK_ENV||'v1'}}
export async function ssFetch(path,payload){const{host,env}=getBase();const url=`${host}${path.replace('{env}',env)}`;const res=await fetch(url,{method:payload?'POST':'GET',headers:{'content-type':'application/json','x-api-key':process.env.SHOTSTACK_API_KEY||''},body:payload?JSON.stringify(payload):undefined});const text=await res.text();if(!res.ok)throw new Error(`Shotstack ${res.status}: ${text}`);try{return JSON.parse(text)}catch{return{text}}}
